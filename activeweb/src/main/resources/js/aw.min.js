const __aw_bind=t=>{t.querySelectorAll("a[data-link=aw]").forEach(t=>t.addEventListener("click",__aw_support))},__aw_support=ev=>{let anchor=ev.target,destination=anchor.getAttribute("data-destination"),formId=anchor.getAttribute("data-form"),href=anchor.getAttribute("href"),method=(anchor.getAttribute("data-method")||"get").toLowerCase(),before=anchor.getAttribute("data-before"),after=anchor.getAttribute("data-after"),beforeArg=anchor.getAttribute("data-before-arg"),afterArg=anchor.getAttribute("data-after-arg"),error=anchor.getAttribute("data-error"),csrfToken=anchor.getAttribute("data-csrf-token"),csrfParam=anchor.getAttribute("data-csrf-param"),confirmMessage=anchor.getAttribute("data-confirm"),data=null;if(null!=confirmMessage&&!confirm(confirmMessage))return!1;if(null!=before&&(data=eval(before)(beforeArg)),ev.preventDefault(),null==destination&&null==after){if(null!==formId){let form=document.getElementById(formId);if(null!==form){let originAction=form.getAttribute("action"),originMethod=form.getAttribute("method");null!=originAction&&href!==originAction&&console.warn("The original form (id="+formId+") action is incorrect. "+href+" is used"),method!==form.getAttribute("method").toLowerCase()&&console.warn("Required action '"+method+"' is incorrect. The original form (id="+formId+") method '"+originMethod+"' is used."),form.setAttribute("action",href),form.submit()}else console.error("Form not found with id="+formId)}else{let param=(t,e,r)=>{let n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",e),n.setAttribute("value",r),t.append(n)},form=document.createElement("form");if(form.setAttribute("method","get"===method?method:"post"),form.setAttribute("action",href),["put","delete"].indexOf(method)>-1&&param(form,"_method",method),csrfToken&&param(form,csrfToken,csrfParam),null!=data&&"object"==typeof data)for([key,val]of Object.entries(data))param(form,key,val);document.body.append(form),form.submit()}return!1}let contentType="application/x-www-form-urlencoded",encType;if(null!==formId){let form=document.getElementById(formId);null!==(encType=form.getAttribute("enctype"))&&(contentType=encType.toLowerCase());let formData=new FormData(form);if("get"===method||null==csrfToken||formData.has(csrfToken)||formData.set(csrfParam,csrfToken),contentType.startsWith("application/json")){let object={};formData.forEach((t,e)=>{object[t]=e}),data=JSON.stringify(object)}else if(contentType.startsWith("application/x-www-form-urlencoded")){let array=[];for(let entry of formData.entries())array.push(encodeURIComponent(entry[0])+"="+encodeURIComponent(entry[1]));array.length>0&&(-1===href.indexOf("?")?href+="?":href+="&",href+=new URLSearchParams(formData).toString())}}let xmlHttpRequest=new XMLHttpRequest,errorHandler=function(event){null!=error&&eval(error)(event.target.status,event.target.responseText)};return xmlHttpRequest.addEventListener("load",event=>{if(event.preventDefault(),200===event.target.status){if(null!=destination){let container=document.getElementById(destination);null!==destination?(container.innerHTML=event.target.responseText,__aw_bind(container)):console.error("Container (id="+destination+") not found.")}null!=after&&eval(after)(afterArg,event.target.responseText)}else errorHandler(event)}),xmlHttpRequest.addEventListener("error",errorHandler),xmlHttpRequest.open(method,href,!0),xmlHttpRequest.setRequestHeader("Content-Type",contentType),xmlHttpRequest.setRequestHeader("X-Requested-With","XMLHttpRequest"),xmlHttpRequest.send(data),!1};window.addEventListener("load",function(t){__aw_bind(document)});